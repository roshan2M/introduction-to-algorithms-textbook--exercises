package section64;

public class Heapsort {
	
	public static void main(String[] args) {
		int a[] = {6, 3, 1, 7, 9, 5, 2};
		heapsort(a);
		for (int i = 0; i < a.length; i++) {
			System.out.print(a[i] + ", ");
		}
	}
	
	public static int total;
	
	public static void swap(int a[], int i, int j) {
		int temp = a[i];
		a[i] = a[j];
		a[j] = temp;
	}
	
	public static void max_heapify(int a[], int index) {
		int l = 2 * index;
		int r = 2 * index + 1;
		int largest = index;
		
		if (l <= total && a[l] > a[index]) largest = l;
		if (r <= total && a[r] > a[index]) largest = r;
		if (largest != index) {
			swap(a, index, largest);
			max_heapify(a, largest);
		}
	}
	
	public static void build_max_heap(int[] a) {
		for (int i = total/2; i >= 0; i--) max_heapify(a, i);
	}
	
	public static void heapsort(int a[]) {
		total = a.length - 1;
		for (int i = total/2; i >= 0; i--) max_heapify(a, i);
		for (int i = total; i > 0; i--) {
			swap(a, 0, i);
			total--;
			max_heapify(a, 0);
		}
	}
	
}
